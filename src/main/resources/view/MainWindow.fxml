<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.Scene?>
<?import javafx.scene.control.Menu?>
<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>

<fx:root type="javafx.stage.Stage" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
         title="ClubTrack" minWidth="450" minHeight="600" onCloseRequest="#handleExit">
  <icons>
    <Image url="@/images/address_book_32.png" />
  </icons>
  <scene>
    <Scene>
      <stylesheets>
        <URL value="@clubtrack-theme.css" />
      </stylesheets>

      <StackPane>
        <children>
          <VBox>
            <!-- Header -->
            <VBox styleClass="header-bar" VBox.vgrow="NEVER">
              <children>
                <javafx.scene.control.Label text="ClubTrack" styleClass="app-title" />
                <javafx.scene.control.Label text="Track members • Attendance • Roles" styleClass="app-subtitle" />
              </children>
            </VBox>

            <!-- Menu bar with File/Edit/Help -->
            <MenuBar VBox.vgrow="NEVER">
              <menus>
                <Menu text="File">
                  <items>
                    <MenuItem text="Exit" onAction="#handleExit" />
                  </items>
                </Menu>
                <Menu text="Edit" />
                <Menu text="Help">
                  <items>
                    <MenuItem text="Help" onAction="#handleHelp" />
                  </items>
                </Menu>
              </menus>
            </MenuBar>

            <!-- Command box -->
            <StackPane VBox.vgrow="NEVER" styleClass="command-container">
              <StackPane fx:id="commandBoxPlaceholder" />
            </StackPane>

            <!-- Full-width members panel -->
            <StackPane VBox.vgrow="ALWAYS" styleClass="members-panel">
              <StackPane fx:id="personListPanelPlaceholder" VBox.vgrow="ALWAYS"/>
            </StackPane>

            <!-- Keep result display placeholder for controller wiring, but don't layout it -->
            <StackPane fx:id="resultDisplayPlaceholder"/>

            <StackPane fx:id="statusbarPlaceholder" VBox.vgrow="NEVER" />
          </VBox>

          <!-- Help Overlay -->
          <StackPane fx:id="helpOverlay" visible="false" pickOnBounds="false">
            <children>
              <!-- Dimmed background -->
              <javafx.scene.layout.StackPane style="-fx-background-color: rgba(15,23,42,0.55);" pickOnBounds="true"/>
              <!-- Card -->
              <javafx.scene.layout.VBox spacing="10" maxWidth="720" styleClass="pane-with-border"
                                        style="-fx-background-color: white; -fx-background-radius: 12; -fx-border-radius: 12;">
                <padding>
                  <Insets top="16" right="16" bottom="16" left="16" />
                </padding>
                <children>
                  <HBox alignment="CENTER_RIGHT">
                    <children>
                      <javafx.scene.control.Label text="Help — Available Commands" style="-fx-font-size: 18px; -fx-font-weight: 700; -fx-text-fill: #0f172a;"/>
                      <Region HBox.hgrow="ALWAYS"/>
                      <javafx.scene.control.Button text="Close" onAction="#handleCloseHelpOverlay" />
                    </children>
                  </HBox>
                  <javafx.scene.control.ScrollPane fitToWidth="true" prefViewportHeight="500">
                    <content>
                      <javafx.scene.control.Label fx:id="helpOverlayContent" wrapText="true" style="-fx-font-size: 13px; -fx-text-fill: #334155;" />
                    </content>
                  </javafx.scene.control.ScrollPane>
                </children>
              </javafx.scene.layout.VBox>
            </children>
          </StackPane>
        </children>
      </StackPane>
    </Scene>
  </scene>
</fx:root>
